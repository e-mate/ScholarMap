package csst15

import org.apache.shiro.SecurityUtils

class FieldController {

    def index = {

    }

    def addField = {
        User u = User.findByEmail(SecurityUtils.subject.principal as String)
        Field f = new Field(name:params.name,description:params.description)
        f.addToUsers(u)
        if (!f.save(flush:true)) {
            return render("There was an error saving the field")
        }
        u.addToEntities(f)
        u.save(flush:true)
        return render("true")


    }



}
